---
layout: docsplus
title: "Сопоставление"
prev: details/type-test
next: concurrency
---

## Сопоставление с образцом

### Экстракторы

Экстракторы — это объекты, которые предоставляют метод `unapply` или `unapplySeq`:

```scala
def unapply[A](x: T)(implicit x: B): U
def unapplySeq[A](x: T)(implicit x: B): U
```

Экстракторы, предоставляющие метод `unapply`, называются экстракторами с фиксированной арностью. 
Экстракторы, предоставляющие метод `unapplySeq`, называются экстракторами с переменным числом параметров.

### Экстракторы с фиксированной арностью

Экстракторы с фиксированной арностью предоставляют следующую подпись:

```scala
def unapply[A](x: T)(implicit x: B): U
```

Тип `U` соответствует одному из следующих совпадений:
- Логическое совпадение
- Соответствие продукта

Или `U` соответствует типу `R`:

```scala
type R = {
  def isEmpty: Boolean
  def get: S
}
```

и `S` соответствует одному из следующих совпадений:
- одно совпадение
- совпадение по имени

Первая форма `unapply` имеет более высокий приоритет, 
а одиночное совпадение имеет более высокий приоритет, чем сопоставление на основе имени.

Использование экстрактора с фиксированной арностью применяется, если выполняется одно из следующих условий:
- `U = true`
- экстрактор используется в качестве соответствия продукта
- `U = Some[T]` (для совместимости со Scala 2)
- `U <: R`, а также `U <: { def isEmpty: false }`

####



### Экстракторы с переменным числом параметров

Экстракторы с переменным числом параметров предоставляют следующую сигнатуру:

```scala
def unapplySeq[A](x: T)(implicit x: B): U
```

Тип `U` соответствует одному из следующих совпадений:
- соответствие последовательности
- соответствие последовательности продуктов

Или `U` соответствует типу `R`:

```scala
type R = {
  def isEmpty: Boolean
  def get: S
}
```

и `S` соответствует одному из двух совпадений выше.

Соответствие последовательности имеет более высокий приоритет, чем соответствие последовательности продуктов.

Использование экстрактора с переменным числом параметров применяется, если выполняется одно из следующих условий:
- экстрактор используется непосредственно как соответствие последовательности или соответствие продукта последовательности
- `U = Some[T]` (для совместимости со Scala 2)
- `U <: R`, а также `U <: { def isEmpty: false }`



---

**References:**
- [Scala 3 Reference](https://docs.scala-lang.org/scala3/reference/changed-features/pattern-matching.html)
