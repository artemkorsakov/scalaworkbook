---
layout: docs
title: "Контекстуальные абстракции"
---

## {{page.title}}

При определенных обстоятельствах можно опустить некоторые параметры вызовов методов, которые считаются повторяющимися.
Эти параметры называются параметрами контекста (_Context Parameters_), 
поскольку они выводятся компилятором из контекста, окружающего вызов метода.

Например, рассмотрим программу, которая сортирует список адресов по двум критериям: название города, а затем - название улицы.

```scala
val addresses: List[Address] = ...
addresses.sortBy(address => (address.city, address.street))
```

Метод `sortBy` принимает функцию, которая возвращает для каждого адреса значение для сравнения его с другими адресами. 
В этом случае мы передаем функцию, которая возвращает пару, содержащую название города и название улицы.
Обратите внимание, что мы указываем только, что сравнивать, но не как выполнять сравнение. 

Как алгоритм сортировки узнает, как сравнивать пары строк?

На самом деле метод `sortBy` принимает второй параметр — параметр контекста, который выводится компилятором. 
Параметр не появляется в приведенном выше примере, потому что он предоставляется компилятором.
Этот второй параметр реализует способ сравнения. 
Удобно опустить его, потому что мы знаем, что строки обычно сравниваются с использованием лексикографического порядка.

Однако также возможно передать его явно:

```scala
addresses.sortBy(address => (address.city, address.street))(using Ordering.Tuple2(Ordering.String, Ordering.String))
```

В данном случае экземпляр `Ordering.Tuple2(Ordering.String, Ordering.String)` - это именно тот экземпляр, 
который выводится компилятором в первом случае. Другими словами, оба примера используют одну и ту же функцию сравнения.

Контекстуальные абстракции используются для того, чтобы избежать повторения кода. 
Они помогают разработчикам писать фрагменты кода, которые являются расширяемыми и в то же время краткими.

---

**References:**
- [Scala3 book](https://docs.scala-lang.org/scala3/book/taste-contextual-abstractions.html)
